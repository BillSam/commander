workflows:
  GET_SUBDOMAINS:
    steps:
      - tool: subfinder
        command: "subfinder -d {domain} -silent -o subs.txt"
      - tool: amass
        command: "amass enum -d {domain}"
  RESOLVE_IP:
    steps:
      - tool: dnsx
        command: "cat output/subfinder_output.txt | dnsx -a -resp-only"
  PORT_SCAN:
    steps:
      - tool: nmap
        command: "nmap -iL {domain}-ip_address.txt  -p- -sV -sC -oN nmap_scaon.txt"
  GITHUB_CHECK:
    steps:
      - tool: github
        command: "for subdomain in $(cat /home/skanice/K-command/output/basic_recon/tesla.com/subfinder_output.txt); do curl -s \"https://$subdomain/.git/HEAD\" | grep -q \"ref:\" && echo \"https://$subdomain/.git\" >> exposed_git.txt; done"
  WEB_PROBE:
    steps:
      - tool: httpx
        command: "httpx -l  subs.txt"
  DNS_Enumeration:
    steps:
      - tool: dnsenum
        command: "dnsenum {domain}"
      - tool: dnsrecon
        command: "dnsrecon -d {domain} -t std,brt"
  CORS_SCAN:
    steps:
      - tool: cors
        command: "corscanner -i subs.txt"